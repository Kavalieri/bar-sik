<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Copy/Paste Detector Report</title><link href="styles/tailwind.css" rel="stylesheet"><link href="styles/prism.css" rel="stylesheet"></head><body class="bg-gray-100"><header class="bg-white shadow py-4"><div class="container mx-auto px-4"><h1 class="text-3xl font-semibold text-gray-800">jscpd - copy/paste report</h1></div></header><main class="container mx-auto my-8 p-4 bg-white shadow rounded"><section class="mb-8" id="dashboard"><h2 class="text-2xl font-semibold text-gray-700 mb-4">Dashboard</h2><div class="grid grid-cols-4 gap-4"><div class="bg-blue-200 p-4 rounded text-center"><h3 class="text-lg font-semibold text-blue-800 mb-2">Total Files</h3><span class="text-4xl font-bold text-blue-800">62</span></div><div class="bg-green-200 p-4 rounded text-center"><h3 class="text-lg font-semibold text-green-800 mb-2">Total Lines of Code</h3><span class="text-4xl font-bold text-green-800">11987</span></div><div class="bg-yellow-200 p-4 rounded text-center"><h3 class="text-lg font-semibold text-yellow-800 mb-2">Number of Clones</h3><span class="text-4xl font-bold text-yellow-800">62</span></div><div class="bg-red-200 p-4 rounded text-center"><h3 class="text-lg font-semibold text-red-800 mb-2">Duplicated Lines</h3><span class="text-4xl font-bold text-red-800">995 (8.30%)</span></div></div></section><section class="mb-8" id="formats"><h2 class="text-2xl font-semibold text-gray-700 mb-4">Formats with Duplications</h2><table class="w-full table-auto"><thead><tr class="bg-gray-200 text-gray-600 uppercase text-sm leading-normal"><th class="py-3 px-6 text-left">Format</th><th class="py-3 px-6 text-left">Files</th><th class="py-3 px-6 text-left">Lines</th><th class="py-3 px-6 text-left">Clones</th><th class="py-3 px-6 text-left">Duplicated Lines</th><th class="py-3 px-6 text-left">Duplicated Tokens</th></tr></thead><tbody><tr class="bg-white border-b border-gray-200 text-gray-800 text-sm"><td class="py-3 px-6"><a class="text-blue-600 hover:underline" href="#python-clones">python</a></td><td class="py-3 px-6">62</td><td class="py-3 px-6">11987</td><td class="py-3 px-6">62</td><td class="py-3 px-6">995</td><td class="py-3 px-6">8219</td></tr></tbody></table></section><section class="mb-8" id="txt-clones"><a name="python-clones"></a><h2 class="text-2xl font-semibold text-gray-700 mb-4">python</h2><div class="divide-y divide-gray-200 border-b-2"><div class="py-4"><p class="text-gray-600">project\scripts\core\UITheme.gd (Line 137:2 - Line 140:29), project\scripts\ui\UIStyleManager.gd (Line 115:2 - Line 118:25)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn0" onclick="toggleCodeBlock('cloneGroup0', 'expandBtn0', 'collapseBtn0')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn0" onclick="toggleCodeBlock('cloneGroup0', 'expandBtn0', 'collapseBtn0')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup0"><code class="language-python text-sm text-gray-800">button.add_theme_stylebox_override(&quot;normal&quot;, style_normal)
	button.add_theme_stylebox_override(&quot;hover&quot;, style_hover)
	button.add_theme_stylebox_override(&quot;pressed&quot;, style_pressed)
	button.add_theme_font_size_override</code></pre></div><div class="py-4"><p class="text-gray-600">project\scripts\core\UIComponentsFactory.gd (Line 159:2 - Line 162:11), project\scripts\core\UIComponentsFactory.gd (Line 14:2 - Line 17:12)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn1" onclick="toggleCodeBlock('cloneGroup1', 'expandBtn1', 'collapseBtn1')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn1" onclick="toggleCodeBlock('cloneGroup1', 'expandBtn1', 'collapseBtn1')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup1"><code class="language-python text-sm text-gray-800">var title_label = Label.new()
	title_label.text = title
	title_label.add_theme_font_size_override(
		&quot;font_size&quot;, int(UITheme.Typography.BODY_SMALL</code></pre></div><div class="py-4"><p class="text-gray-600">project\scripts\core\ResourceManager.gd (Line 162:16 - Line 167:4), project\scripts\core\ResourceManager.gd (Line 132:13 - Line 137:3)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn2" onclick="toggleCodeBlock('cloneGroup2', 'expandBtn2', 'collapseBtn2')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn2" onclick="toggleCodeBlock('cloneGroup2', 'expandBtn2', 'collapseBtn2')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup2"><code class="language-python text-sm text-gray-800">(resource_id: String, amount: int) -&gt; bool:
	if not resources.has(resource_id):
		push_error(&quot;‚ùå Recurso no v√°lido: &quot; + resource_id)
		return false

	var</code></pre></div><div class="py-4"><p class="text-gray-600">project\scripts\core\ResourceManager.gd (Line 174:2 - Line 179:7), project\scripts\core\ResourceManager.gd (Line 149:3 - Line 154:34)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn3" onclick="toggleCodeBlock('cloneGroup3', 'expandBtn3', 'collapseBtn3')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn3" onclick="toggleCodeBlock('cloneGroup3', 'expandBtn3', 'collapseBtn3')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup3"><code class="language-python text-sm text-gray-800">resource_changed.emit(resource_id, old_amount, new_amount)

	if AppConfig.is_debug:
		print(&quot;üì¶ &quot;, RESOURCE_DATA[resource_id].name, &quot;: &quot;, old_amount, &quot; ‚Üí &quot;, new_amount)

	return</code></pre></div><div class="py-4"><p class="text-gray-600">project\scripts\core\GameUtils.gd (Line 99:5 - Line 106:2), project\scripts\ui\BasePanel.gd (Line 90:2 - Line 97:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn4" onclick="toggleCodeBlock('cloneGroup4', 'expandBtn4', 'collapseBtn4')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn4" onclick="toggleCodeBlock('cloneGroup4', 'expandBtn4', 'collapseBtn4')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup4"><code class="language-python text-sm text-gray-800">:
	&quot;&quot;&quot;Limpiar todos los hijos de un contenedor de forma segura&quot;&quot;&quot;
	if not is_instance_valid(container):
		return

	for child in container.get_children():
		if is_instance_valid(child):
			child.queue_free()</code></pre></div><div class="py-4"><p class="text-gray-600">project\scripts\core\GameController.gd (Line 537:2 - Line 540:7), project\scripts\core\GameController.gd (Line 426:2 - Line 429:19)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn5" onclick="toggleCodeBlock('cloneGroup5', 'expandBtn5', 'collapseBtn5')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn5" onclick="toggleCodeBlock('cloneGroup5', 'expandBtn5', 'collapseBtn5')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup5"><code class="language-python text-sm text-gray-800">var station_defs = production_manager.get_station_definitions()
	if station_index &lt; station_defs.size():
		var station_id = station_defs[station_index].id
		print(</code></pre></div><div class="py-4"><p class="text-gray-600">project\scripts\core\GameController.gd (Line 557:2 - Line 560:4), project\scripts\core\GameController.gd (Line 426:2 - Line 429:19)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn6" onclick="toggleCodeBlock('cloneGroup6', 'expandBtn6', 'collapseBtn6')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn6" onclick="toggleCodeBlock('cloneGroup6', 'expandBtn6', 'collapseBtn6')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup6"><code class="language-python text-sm text-gray-800">var station_defs = production_manager.get_station_definitions()
	if station_index &lt; station_defs.size():
		var station_id = station_defs[station_index].id
		var</code></pre></div><div class="py-4"><p class="text-gray-600">project\scripts\core\CustomerManager.gd (Line 250:21 - Line 258:4), project\scripts\core\CustomerManager.gd (Line 203:17 - Line 211:38)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn7" onclick="toggleCodeBlock('cloneGroup7', 'expandBtn7', 'collapseBtn7')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn7" onclick="toggleCodeBlock('cloneGroup7', 'expandBtn7', 'collapseBtn7')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup7"><code class="language-python text-sm text-gray-800">(upgrade_id: String) -&gt; bool:
	if not game_data:
		return false

	var upgrade_def = _find_upgrade_by_id(upgrade_id)
	if not upgrade_def:
		return false

	var</code></pre></div><div class="py-4"><p class="text-gray-600">project\scripts\core\CurrencyManager.gd (Line 57:15 - Line 62:4), project\scripts\core\CurrencyManager.gd (Line 34:13 - Line 39:3)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn8" onclick="toggleCodeBlock('cloneGroup8', 'expandBtn8', 'collapseBtn8')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn8" onclick="toggleCodeBlock('cloneGroup8', 'expandBtn8', 'collapseBtn8')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup8"><code class="language-python text-sm text-gray-800">(currency_type: String, amount: int) -&gt; bool:
	if not currencies.has(currency_type):
		push_error(&quot;‚ùå Tipo de moneda no v√°lido: &quot; + currency_type)
		return false

	var</code></pre></div><div class="py-4"><p class="text-gray-600">project\scripts\core\CurrencyManager.gd (Line 119:17 - Line 122:13), project\scripts\core\CurrencyManager.gd (Line 112:20 - Line 115:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn9" onclick="toggleCodeBlock('cloneGroup9', 'expandBtn9', 'collapseBtn9')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn9" onclick="toggleCodeBlock('cloneGroup9', 'expandBtn9', 'collapseBtn9')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup9"><code class="language-python text-sm text-gray-800">(currency_type: String) -&gt; int:
	if not currencies.has(currency_type):
		return 0
	return currencies[currency_type].total_earned</code></pre></div><div class="py-4"><p class="text-gray-600">project\scripts\components\StockDisplayComponent.gd (Line 22:2 - Line 27:13), project\scripts\ui\UIStyleManager.gd (Line 28:2 - Line 33:9)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn10" onclick="toggleCodeBlock('cloneGroup10', 'expandBtn10', 'collapseBtn10')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn10" onclick="toggleCodeBlock('cloneGroup10', 'expandBtn10', 'collapseBtn10')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup10"><code class="language-python text-sm text-gray-800">= {
	&quot;primary&quot;: Color(0.2, 0.6, 1.0),  # Azul primario
	&quot;secondary&quot;: Color(0.7, 0.7, 0.7),  # Gris secundario
	&quot;success&quot;: Color(0.2, 0.8, 0.2),  # Verde √©xito
	&quot;warning&quot;: Color(1.0, 0.8, 0.0),  # Amarillo advertencia
	&quot;background&quot;</code></pre></div><div class="py-4"><p class="text-gray-600">project\scripts\components\StockDisplayComponent.gd (Line 342:2 - Line 345:6), project\scripts\ui\UIStyleManager.gd (Line 115:2 - Line 118:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn11" onclick="toggleCodeBlock('cloneGroup11', 'expandBtn11', 'collapseBtn11')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn11" onclick="toggleCodeBlock('cloneGroup11', 'expandBtn11', 'collapseBtn11')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup11"><code class="language-python text-sm text-gray-800">button.add_theme_stylebox_override(&quot;normal&quot;, style_normal)
	button.add_theme_stylebox_override(&quot;hover&quot;, style_hover)
	button.add_theme_stylebox_override(&quot;pressed&quot;, style_pressed)
	button.add_theme_color_override(&quot;font_color&quot;, Color</code></pre></div><div class="py-4"><p class="text-gray-600">project\scripts\components\OffersComponent.gd (Line 216:2 - Line 220:13), project\scripts\components\OffersComponent.gd (Line 202:2 - Line 205:12)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn12" onclick="toggleCodeBlock('cloneGroup12', 'expandBtn12', 'collapseBtn12')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn12" onclick="toggleCodeBlock('cloneGroup12', 'expandBtn12', 'collapseBtn12')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup12"><code class="language-python text-sm text-gray-800">var recipes = station_def.get(&quot;recipes&quot;, [])

	for recipe in recipes:
		var output = recipe.get(&quot;output&quot;, {})
		for product_name</code></pre></div><div class="py-4"><p class="text-gray-600">project\scripts\components\OffersComponent.gd (Line 247:2 - Line 251:10), project\scripts\components\OffersComponent.gd (Line 202:2 - Line 221:13)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn13" onclick="toggleCodeBlock('cloneGroup13', 'expandBtn13', 'collapseBtn13')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn13" onclick="toggleCodeBlock('cloneGroup13', 'expandBtn13', 'collapseBtn13')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup13"><code class="language-python text-sm text-gray-800">var recipes = station_def.get(&quot;recipes&quot;, [])
	for recipe in recipes:
		var output = recipe.get(&quot;output&quot;, {})
		for product_name in output.keys():
			if game_data</code></pre></div><div class="py-4"><p class="text-gray-600">project\scripts\components\OffersComponent.gd (Line 270:2 - Line 281:7), project\scripts\components\OffersComponent.gd (Line 246:2 - Line 257:3)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn14" onclick="toggleCodeBlock('cloneGroup14', 'expandBtn14', 'collapseBtn14')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn14" onclick="toggleCodeBlock('cloneGroup14', 'expandBtn14', 'collapseBtn14')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup14"><code class="language-python text-sm text-gray-800">var has_stock = false
	var recipes = station_def.get(&quot;recipes&quot;, [])
	for recipe in recipes:
		var output = recipe.get(&quot;output&quot;, {})
		for product_name in output.keys():
			if game_data.get(&quot;products&quot;, {}).get(product_name, 0) &gt; 0:
				has_stock = true
				break
		if has_stock:
			break

	return</code></pre></div><div class="py-4"><p class="text-gray-600">project\tests\TestGeneratorPricing.gd (Line 69:2 - Line 77:27), project\tests\TestGeneratorPricing.gd (Line 13:2 - Line 21:35)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn15" onclick="toggleCodeBlock('cloneGroup15', 'expandBtn15', 'collapseBtn15')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn15" onclick="toggleCodeBlock('cloneGroup15', 'expandBtn15', 'collapseBtn15')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup15"><code class="language-python text-sm text-gray-800">var game_controller = get_tree().get_first_node_in_group(&quot;game_controller&quot;)
	if not game_controller:
		print(&quot;‚ùå No se encontr√≥ GameController&quot;)
		return

	var gen_manager = game_controller.generator_manager
	var game_data = game_controller.game_data

	print(&quot;\nüõí COMPRA REAL: %dx %s&quot;</code></pre></div><div class="py-4"><p class="text-gray-600">project\tests\TestGeneratorPersistence.gd (Line 15:2 - Line 22:7), project\tests\TestGeneratorPricing.gd (Line 11:2 - Line 18:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn16" onclick="toggleCodeBlock('cloneGroup16', 'expandBtn16', 'collapseBtn16')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn16" onclick="toggleCodeBlock('cloneGroup16', 'expandBtn16', 'collapseBtn16')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup16"><code class="language-python text-sm text-gray-800">await get_tree().process_frame

	var game_controller = get_tree().get_first_node_in_group(&quot;game_controller&quot;)
	if not game_controller:
		print(&quot;‚ùå No se encontr√≥ GameController&quot;)
		return

	print(</code></pre></div><div class="py-4"><p class="text-gray-600">project\tests\FinalSystemTest.gd (Line 10:19 - Line 20:49), project\tests\TestGeneratorPricing.gd (Line 10:14 - Line 24:25)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn17" onclick="toggleCodeBlock('cloneGroup17', 'expandBtn17', 'collapseBtn17')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn17" onclick="toggleCodeBlock('cloneGroup17', 'expandBtn17', 'collapseBtn17')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup17"><code class="language-python text-sm text-gray-800">() -&gt; void:
	await get_tree().process_frame

	var game_controller = get_tree().get_first_node_in_group(&quot;game_controller&quot;)
	if not game_controller:
		print(&quot;‚ùå No se encontr√≥ GameController&quot;)
		return

	print(&quot;‚úÖ GameController encontrado&quot;)

	# Test 1: Verificar sistema de precios escalados</code></pre></div><div class="py-4"><p class="text-gray-600">project\singletons\StockManager.gd (Line 101:13 - Line 105:14), project\singletons\StockManager.gd (Line 82:10 - Line 86:13)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn18" onclick="toggleCodeBlock('cloneGroup18', 'expandBtn18', 'collapseBtn18')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn18" onclick="toggleCodeBlock('cloneGroup18', 'expandBtn18', 'collapseBtn18')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup18"><code class="language-python text-sm text-gray-800">(item_type: String, item_name: String, quantity: int) -&gt; bool:
	if not game_data or quantity &lt;= 0:
		return false

	var current_stock</code></pre></div><div class="py-4"><p class="text-gray-600">project\singletons\StockManager.gd (Line 110:2 - Line 122:3), project\singletons\StockManager.gd (Line 87:2 - Line 98:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn19" onclick="toggleCodeBlock('cloneGroup19', 'expandBtn19', 'collapseBtn19')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn19" onclick="toggleCodeBlock('cloneGroup19', 'expandBtn19', 'collapseBtn19')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup19"><code class="language-python text-sm text-gray-800">quantity

	match item_type:
		&quot;ingredient&quot;, &quot;resource&quot;:
			game_data.resources[item_name] = new_quantity
		&quot;product&quot;:
			game_data.products[item_name] = new_quantity
		_:
			return false

	stock_updated.emit(item_type, item_name, new_quantity)

	if</code></pre></div><div class="py-4"><p class="text-gray-600">project\singletons\SaveSystem.gd (Line 234:8 - Line 241:16), project\singletons\SaveSystem.gd (Line 225:10 - Line 232:21)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn20" onclick="toggleCodeBlock('cloneGroup20', 'expandBtn20', 'collapseBtn20')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn20" onclick="toggleCodeBlock('cloneGroup20', 'expandBtn20', 'collapseBtn20')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup20"><code class="language-python text-sm text-gray-800">)
	if parse_result == OK:
		var data = json.get_data()
		if _validate_save_data(data):
			return data
	return {}

func _rotate_backups</code></pre></div><div class="py-4"><p class="text-gray-600">project\scripts\SalesPanelBasic.gd (Line 359:3 - Line 363:2), project\scripts\core\SalesManager.gd (Line 103:2 - Line 107:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn21" onclick="toggleCodeBlock('cloneGroup21', 'expandBtn21', 'collapseBtn21')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn21" onclick="toggleCodeBlock('cloneGroup21', 'expandBtn21', 'collapseBtn21')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup21"><code class="language-python text-sm text-gray-800">return {
			&quot;money&quot;: game_data.money,
			&quot;resources&quot;: game_data.resources.duplicate(),
			&quot;products&quot;: game_data.products.duplicate()
		}</code></pre></div><div class="py-4"><p class="text-gray-600">project\scripts\ProductionPanelBasic.gd (Line 22:38 - Line 32:25), project\scripts\SalesPanelBasic.gd (Line 23:33 - Line 33:21)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn22" onclick="toggleCodeBlock('cloneGroup22', 'expandBtn22', 'collapseBtn22')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn22" onclick="toggleCodeBlock('cloneGroup22', 'expandBtn22', 'collapseBtn22')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup22"><code class="language-python text-sm text-gray-800">)

func setup_basic_layout():
	&quot;&quot;&quot;Configurar layout b√°sico con elementos nativos de Godot&quot;&quot;&quot;
	# Limpiar contenido existente
	for child in main_vbox.get_children():
		child.queue_free()

	# === T√çTULO PRINCIPAL ===
	var main_title = Label.new()
	main_title.text = &quot;üè≠ PANEL DE PRODUCCI√ìN&quot;</code></pre></div><div class="py-4"><p class="text-gray-600">project\scripts\ProductionPanelBasic.gd (Line 33:2 - Line 43:31), project\scripts\SalesPanelBasic.gd (Line 34:2 - Line 44:32)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn23" onclick="toggleCodeBlock('cloneGroup23', 'expandBtn23', 'collapseBtn23')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn23" onclick="toggleCodeBlock('cloneGroup23', 'expandBtn23', 'collapseBtn23')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup23"><code class="language-python text-sm text-gray-800">main_title.add_theme_font_size_override(&quot;font_size&quot;, 36)  # 24‚Üí36 mucho m√°s grande
	main_title.horizontal_alignment = HORIZONTAL_ALIGNMENT_CENTER
	main_title.add_theme_color_override(&quot;font_color&quot;, Color.GOLD)
	main_vbox.add_child(main_title)

	# Separador
	var separator1 = HSeparator.new()
	separator1.custom_minimum_size = Vector2(0, 30)  # 20‚Üí30 m√°s espacio
	main_vbox.add_child(separator1)

	# === SECCI√ìN DE PRODUCTOS ===</code></pre></div><div class="py-4"><p class="text-gray-600">project\scripts\ProductionPanelBasic.gd (Line 106:2 - Line 114:22), project\scripts\ui\SimpleGridLayout.gd (Line 86:2 - Line 94:19)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn24" onclick="toggleCodeBlock('cloneGroup24', 'expandBtn24', 'collapseBtn24')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn24" onclick="toggleCodeBlock('cloneGroup24', 'expandBtn24', 'collapseBtn24')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup24"><code class="language-python text-sm text-gray-800">var vbox = VBoxContainer.new()
	vbox.set_anchors_and_offsets_preset(Control.PRESET_FULL_RECT)
	vbox.add_theme_constant_override(&quot;separation&quot;, 4)
	vbox.add_theme_constant_override(&quot;margin_left&quot;, 8)
	vbox.add_theme_constant_override(&quot;margin_right&quot;, 8)
	vbox.add_theme_constant_override(&quot;margin_top&quot;, 8)
	vbox.add_theme_constant_override(&quot;margin_bottom&quot;, 8)

	# T√≠tulo del producto</code></pre></div><div class="py-4"><p class="text-gray-600">project\scripts\ProductionPanelBasic.gd (Line 155:2 - Line 160:65), project\scripts\SalesPanelBasic.gd (Line 146:2 - Line 120:24)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn25" onclick="toggleCodeBlock('cloneGroup25', 'expandBtn25', 'collapseBtn25')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn25" onclick="toggleCodeBlock('cloneGroup25', 'expandBtn25', 'collapseBtn25')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup25"><code class="language-python text-sm text-gray-800">var title_label = Label.new()
	title_label.text = &quot;%s %s&quot; % [data.emoji, data.name]
	title_label.add_theme_font_size_override(&quot;font_size&quot;, 18)  # 14‚Üí18 m√°s grande
	title_label.horizontal_alignment = HORIZONTAL_ALIGNMENT_CENTER

	# Info de la estaci√≥n con ingredientes en formato cantidad/total</code></pre></div><div class="py-4"><p class="text-gray-600">project\scripts\ProductionPanelBasic.gd (Line 285:11 - Line 292:11), project\scripts\SalesPanelBasic.gd (Line 226:8 - Line 233:8)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn26" onclick="toggleCodeBlock('cloneGroup26', 'expandBtn26', 'collapseBtn26')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn26" onclick="toggleCodeBlock('cloneGroup26', 'expandBtn26', 'collapseBtn26')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup26"><code class="language-python text-sm text-gray-800">]
	var current_multiplier = state.multiplier
	var next_multiplier = _get_next_multiplier(current_multiplier)

	state.multiplier = next_multiplier
	state.multiplier_button.text = &quot;x%d&quot; % next_multiplier

	print(&quot;üî¢ Multiplicador cambiado para %s: x%d&quot; % [station_id</code></pre></div><div class="py-4"><p class="text-gray-600">project\scripts\ProductionPanelBasic.gd (Line 298:11 - Line 310:54), project\scripts\SalesPanelBasic.gd (Line 239:8 - Line 251:48)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn27" onclick="toggleCodeBlock('cloneGroup27', 'expandBtn27', 'collapseBtn27')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn27" onclick="toggleCodeBlock('cloneGroup27', 'expandBtn27', 'collapseBtn27')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup27"><code class="language-python text-sm text-gray-800">)
	print(&quot;‚úÖ Bot√≥n actualizado inmediatamente despu√©s del cambio de multiplicador&quot;)

func _get_next_multiplier(current: int) -&gt; int:
	&quot;&quot;&quot;Obtener siguiente multiplicador en secuencia x1‚Üíx5‚Üíx10‚Üíx25‚Üíx1&quot;&quot;&quot;
	match current:
		1: return 5
		5: return 10
		10: return 25
		25: return 1
		_: return 1

## ===== M√âTODOS P√öBLICOS PARA INTERFAZ EXTERNA =====</code></pre></div><div class="py-4"><p class="text-gray-600">project\scripts\ProductionPanelBasic.gd (Line 445:23 - Line 453:2), project\scripts\SalesPanelBasic.gd (Line 354:18 - Line 107:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn28" onclick="toggleCodeBlock('cloneGroup28', 'expandBtn28', 'collapseBtn28')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn28" onclick="toggleCodeBlock('cloneGroup28', 'expandBtn28', 'collapseBtn28')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup28"><code class="language-python text-sm text-gray-800">.get_game_data()

	# Fallback usando singleton GameManager
	if GameManager and GameManager.has_method(&quot;get_game_data&quot;):
		var game_data = GameManager.get_game_data()
		return {
			&quot;money&quot;: game_data.money,
			&quot;resources&quot;: game_data.resources.duplicate(),
			&quot;products&quot;: game_data.products.duplicate(),</code></pre></div><div class="py-4"><p class="text-gray-600">project\scripts\OffersScene.gd (Line 147:2 - Line 152:6), project\scripts\ShopScene.gd (Line 184:2 - Line 189:12)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn29" onclick="toggleCodeBlock('cloneGroup29', 'expandBtn29', 'collapseBtn29')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn29" onclick="toggleCodeBlock('cloneGroup29', 'expandBtn29', 'collapseBtn29')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup29"><code class="language-python text-sm text-gray-800">title
	UITheme.apply_label_style(title_label, &quot;body_large&quot;)
	info_container.add_child(title_label)

	var desc_label = Label.new()
	desc_label.text = offer</code></pre></div><div class="py-4"><p class="text-gray-600">project\scripts\GenerationPanelBasic.gd (Line 20:38 - Line 30:25), project\scripts\SalesPanelBasic.gd (Line 23:33 - Line 33:21)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn30" onclick="toggleCodeBlock('cloneGroup30', 'expandBtn30', 'collapseBtn30')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn30" onclick="toggleCodeBlock('cloneGroup30', 'expandBtn30', 'collapseBtn30')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup30"><code class="language-python text-sm text-gray-800">)

func setup_basic_layout():
	&quot;&quot;&quot;Configurar layout b√°sico con elementos nativos de Godot&quot;&quot;&quot;
	# Limpiar contenido existente
	for child in main_vbox.get_children():
		child.queue_free()

	# === T√çTULO PRINCIPAL ===
	var main_title = Label.new()
	main_title.text = &quot;üè≠ PANEL DE GENERACI√ìN&quot;</code></pre></div><div class="py-4"><p class="text-gray-600">project\scripts\GenerationPanelBasic.gd (Line 31:2 - Line 41:30), project\scripts\SalesPanelBasic.gd (Line 34:2 - Line 44:32)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn31" onclick="toggleCodeBlock('cloneGroup31', 'expandBtn31', 'collapseBtn31')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn31" onclick="toggleCodeBlock('cloneGroup31', 'expandBtn31', 'collapseBtn31')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup31"><code class="language-python text-sm text-gray-800">main_title.add_theme_font_size_override(&quot;font_size&quot;, 36)  # 24‚Üí36 mucho m√°s grande
	main_title.horizontal_alignment = HORIZONTAL_ALIGNMENT_CENTER
	main_title.add_theme_color_override(&quot;font_color&quot;, Color.GOLD)
	main_vbox.add_child(main_title)

	# Separador
	var separator1 = HSeparator.new()
	separator1.custom_minimum_size = Vector2(0, 30)  # 20‚Üí30 m√°s espacio
	main_vbox.add_child(separator1)

	# === SECCI√ìN DE RECURSOS ===</code></pre></div><div class="py-4"><p class="text-gray-600">project\scripts\GenerationPanelBasic.gd (Line 42:24 - Line 49:33), project\scripts\ProductionPanelBasic.gd (Line 44:23 - Line 51:46)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn32" onclick="toggleCodeBlock('cloneGroup32', 'expandBtn32', 'collapseBtn32')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn32" onclick="toggleCodeBlock('cloneGroup32', 'expandBtn32', 'collapseBtn32')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup32"><code class="language-python text-sm text-gray-800">()

	# Separador
	var separator2 = HSeparator.new()
	separator2.custom_minimum_size = Vector2(0, 30)
	main_vbox.add_child(separator2)

	# === SECCI√ìN DE GENERADORES ===</code></pre></div><div class="py-4"><p class="text-gray-600">project\scripts\GenerationPanelBasic.gd (Line 94:2 - Line 107:21), project\scripts\ProductionPanelBasic.gd (Line 101:2 - Line 94:19)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn33" onclick="toggleCodeBlock('cloneGroup33', 'expandBtn33', 'collapseBtn33')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn33" onclick="toggleCodeBlock('cloneGroup33', 'expandBtn33', 'collapseBtn33')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup33"><code class="language-python text-sm text-gray-800">var panel = Panel.new()
	panel.custom_minimum_size = Vector2(200, 100)  # 180x80‚Üí200x100 m√°s grande para fuentes
	panel.size_flags_horizontal = Control.SIZE_EXPAND_FILL

	# Contenedor interno
	var vbox = VBoxContainer.new()
	vbox.set_anchors_and_offsets_preset(Control.PRESET_FULL_RECT)
	vbox.add_theme_constant_override(&quot;separation&quot;, 4)
	vbox.add_theme_constant_override(&quot;margin_left&quot;, 8)
	vbox.add_theme_constant_override(&quot;margin_right&quot;, 8)
	vbox.add_theme_constant_override(&quot;margin_top&quot;, 8)
	vbox.add_theme_constant_override(&quot;margin_bottom&quot;, 8)

	# T√≠tulo del recurso</code></pre></div><div class="py-4"><p class="text-gray-600">project\scripts\GenerationPanelBasic.gd (Line 108:2 - Line 113:23), project\scripts\SalesPanelBasic.gd (Line 146:2 - Line 120:24)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn34" onclick="toggleCodeBlock('cloneGroup34', 'expandBtn34', 'collapseBtn34')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn34" onclick="toggleCodeBlock('cloneGroup34', 'expandBtn34', 'collapseBtn34')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup34"><code class="language-python text-sm text-gray-800">var title_label = Label.new()
	title_label.text = &quot;%s %s&quot; % [data.emoji, data.name]
	title_label.add_theme_font_size_override(&quot;font_size&quot;, 18)  # 14‚Üí18 m√°s grande
	title_label.horizontal_alignment = HORIZONTAL_ALIGNMENT_CENTER

	# Cantidad del recurso</code></pre></div><div class="py-4"><p class="text-gray-600">project\scripts\GenerationPanelBasic.gd (Line 114:2 - Line 120:12), project\scripts\ProductionPanelBasic.gd (Line 121:2 - Line 127:11)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn35" onclick="toggleCodeBlock('cloneGroup35', 'expandBtn35', 'collapseBtn35')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn35" onclick="toggleCodeBlock('cloneGroup35', 'expandBtn35', 'collapseBtn35')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup35"><code class="language-python text-sm text-gray-800">var amount_label = Label.new()
	amount_label.text = &quot;Cantidad: 0&quot;
	amount_label.add_theme_font_size_override(&quot;font_size&quot;, 16)  # Agregar tama√±o
	amount_label.horizontal_alignment = HORIZONTAL_ALIGNMENT_CENTER
	amount_label.vertical_alignment = VERTICAL_ALIGNMENT_CENTER
	amount_label.size_flags_vertical = Control.SIZE_EXPAND_FILL
	amount_label.name = &quot;amount_label_&quot; + resource_id</code></pre></div><div class="py-4"><p class="text-gray-600">project\scripts\GenerationPanelBasic.gd (Line 134:2 - Line 147:23), project\scripts\ProductionPanelBasic.gd (Line 141:2 - Line 154:24)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn36" onclick="toggleCodeBlock('cloneGroup36', 'expandBtn36', 'collapseBtn36')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn36" onclick="toggleCodeBlock('cloneGroup36', 'expandBtn36', 'collapseBtn36')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup36"><code class="language-python text-sm text-gray-800">var main_panel = Panel.new()
	main_panel.custom_minimum_size = Vector2(0, 100)  # 80‚Üí100 m√°s alto para fuentes grandes
	main_panel.size_flags_horizontal = Control.SIZE_EXPAND_FILL

	# Layout del panel
	var panel_vbox = VBoxContainer.new()
	panel_vbox.set_anchors_and_offsets_preset(Control.PRESET_FULL_RECT)
	panel_vbox.add_theme_constant_override(&quot;margin_left&quot;, 8)
	panel_vbox.add_theme_constant_override(&quot;margin_right&quot;, 8)
	panel_vbox.add_theme_constant_override(&quot;margin_top&quot;, 8)
	panel_vbox.add_theme_constant_override(&quot;margin_bottom&quot;, 8)
	panel_vbox.add_theme_constant_override(&quot;separation&quot;, 4)

	# T√≠tulo del generador</code></pre></div><div class="py-4"><p class="text-gray-600">project\scripts\GenerationPanelBasic.gd (Line 148:2 - Line 153:48), project\scripts\SalesPanelBasic.gd (Line 146:2 - Line 120:24)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn37" onclick="toggleCodeBlock('cloneGroup37', 'expandBtn37', 'collapseBtn37')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn37" onclick="toggleCodeBlock('cloneGroup37', 'expandBtn37', 'collapseBtn37')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup37"><code class="language-python text-sm text-gray-800">var title_label = Label.new()
	title_label.text = &quot;%s %s&quot; % [data.emoji, data.name]
	title_label.add_theme_font_size_override(&quot;font_size&quot;, 18)  # 14‚Üí18 m√°s grande
	title_label.horizontal_alignment = HORIZONTAL_ALIGNMENT_CENTER

	# Info del generador (cantidad pose√≠da y costo)</code></pre></div><div class="py-4"><p class="text-gray-600">project\scripts\GenerationPanelBasic.gd (Line 160:2 - Line 174:13), project\scripts\ProductionPanelBasic.gd (Line 168:2 - Line 182:11)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn38" onclick="toggleCodeBlock('cloneGroup38', 'expandBtn38', 'collapseBtn38')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn38" onclick="toggleCodeBlock('cloneGroup38', 'expandBtn38', 'collapseBtn38')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup38"><code class="language-python text-sm text-gray-800">panel_vbox.add_child(title_label)
	panel_vbox.add_child(info_label)
	main_panel.add_child(panel_vbox)

	# Contenedor de botones (horizontal)
	var buttons_hbox = HBoxContainer.new()
	buttons_hbox.add_theme_constant_override(&quot;separation&quot;, 8)

	# Bot√≥n principal de compra
	var buy_button = Button.new()
	buy_button.text = &quot;COMPRAR&quot;
	buy_button.size_flags_horizontal = Control.SIZE_EXPAND_FILL
	buy_button.custom_minimum_size = Vector2(0, 40)
	buy_button.add_theme_font_size_override(&quot;font_size&quot;, 16)  # Botones m√°s legibles
	buy_button.name = &quot;buy_button_&quot; + generator_id</code></pre></div><div class="py-4"><p class="text-gray-600">project\scripts\GenerationPanelBasic.gd (Line 176:2 - Line 181:13), project\scripts\ProductionPanelBasic.gd (Line 184:2 - Line 189:11)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn39" onclick="toggleCodeBlock('cloneGroup39', 'expandBtn39', 'collapseBtn39')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn39" onclick="toggleCodeBlock('cloneGroup39', 'expandBtn39', 'collapseBtn39')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup39"><code class="language-python text-sm text-gray-800"># Bot√≥n multiplicador
	var multiplier_button = Button.new()
	multiplier_button.text = &quot;x1&quot;
	multiplier_button.custom_minimum_size = Vector2(60, 40)
	multiplier_button.add_theme_font_size_override(&quot;font_size&quot;, 14)  # Bot√≥n multiplicador legible
	multiplier_button.name = &quot;multiplier_button_&quot; + generator_id</code></pre></div><div class="py-4"><p class="text-gray-600">project\scripts\GenerationPanelBasic.gd (Line 225:13 - Line 232:13), project\scripts\SalesPanelBasic.gd (Line 226:8 - Line 233:8)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn40" onclick="toggleCodeBlock('cloneGroup40', 'expandBtn40', 'collapseBtn40')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn40" onclick="toggleCodeBlock('cloneGroup40', 'expandBtn40', 'collapseBtn40')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup40"><code class="language-python text-sm text-gray-800">]
	var current_multiplier = state.multiplier
	var next_multiplier = _get_next_multiplier(current_multiplier)

	state.multiplier = next_multiplier
	state.multiplier_button.text = &quot;x%d&quot; % next_multiplier

	print(&quot;üî¢ Multiplicador cambiado para %s: x%d&quot; % [generator_id</code></pre></div><div class="py-4"><p class="text-gray-600">project\scripts\GenerationPanelBasic.gd (Line 238:13 - Line 251:22), project\scripts\SalesPanelBasic.gd (Line 239:8 - Line 252:18)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn41" onclick="toggleCodeBlock('cloneGroup41', 'expandBtn41', 'collapseBtn41')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn41" onclick="toggleCodeBlock('cloneGroup41', 'expandBtn41', 'collapseBtn41')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup41"><code class="language-python text-sm text-gray-800">)
	print(&quot;‚úÖ Bot√≥n actualizado inmediatamente despu√©s del cambio de multiplicador&quot;)

func _get_next_multiplier(current: int) -&gt; int:
	&quot;&quot;&quot;Obtener siguiente multiplicador en secuencia x1‚Üíx5‚Üíx10‚Üíx25‚Üíx1&quot;&quot;&quot;
	match current:
		1: return 5
		5: return 10
		10: return 25
		25: return 1
		_: return 1

# M√©todo para compatibilidad con GameController
func set_generator_manager</code></pre></div><div class="py-4"><p class="text-gray-600">project\scripts\GenerationPanelBasic.gd (Line 337:2 - Line 341:14), project\scripts\ProductionPanelBasic.gd (Line 404:3 - Line 408:20)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn42" onclick="toggleCodeBlock('cloneGroup42', 'expandBtn42', 'collapseBtn42')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn42" onclick="toggleCodeBlock('cloneGroup42', 'expandBtn42', 'collapseBtn42')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup42"><code class="language-python text-sm text-gray-800">state.buy_button.disabled = not can_afford
	state.buy_button.modulate = Color.WHITE if can_afford else Color.GRAY

	if can_afford:
		state.buy_button.text = &quot;COMPRAR x%d&quot;</code></pre></div><div class="py-4"><p class="text-gray-600">project\debug\SystemRepairSummary.gd (Line 41:2 - Line 48:36), project\tests\DebugGeneratorTest.gd (Line 25:2 - Line 31:3)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn43" onclick="toggleCodeBlock('cloneGroup43', 'expandBtn43', 'collapseBtn43')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn43" onclick="toggleCodeBlock('cloneGroup43', 'expandBtn43', 'collapseBtn43')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup43"><code class="language-python text-sm text-gray-800">var game_controller = get_tree().get_first_node_in_group(&quot;game_controller&quot;)
	if not game_controller:
		print(&quot;‚ùå No se encontr√≥ GameController&quot;)
		return

	var game_data = game_controller.game_data

	# Test 1: Verificar l√≠mites m√°ximos</code></pre></div><div class="py-4"><p class="text-gray-600">project\debug\ProductionPanelBasic_NEW.gd (Line 1:1 - Line 382:55), project\scripts\ProductionPanelBasic.gd (Line 1:1 - Line 382:48)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn44" onclick="toggleCodeBlock('cloneGroup44', 'expandBtn44', 'collapseBtn44')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn44" onclick="toggleCodeBlock('cloneGroup44', 'expandBtn44', 'collapseBtn44')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup44"><code class="language-python text-sm text-gray-800">extends Control
## ProductionPanelBasic - Panel de producci√≥n simple sin herencias complejas
## Arquitectura id√©ntica a GenerationPanelBasic para consistencia

# Se√±ales
signal station_purchased(station_id: String, quantity: int)
signal production_requested(station_id: String, quantity: int)
signal multiplier_changed(station_id: String, new_multiplier: int)

# Estado del panel
var production_manager_ref: Node = null
var button_states: Dictionary = {}  # Estados centralizados de botones
var update_in_progress: bool = false  # Prevenir updates recursivos

# Referencias
@onready var scroll_container: ScrollContainer = $ScrollContainer
@onready var main_vbox: VBoxContainer = $ScrollContainer/MainVBox

func _ready():
	print(&quot;üè≠ ProductionPanelBasic _ready() iniciado&quot;)
	setup_basic_layout()
	print(&quot;‚úÖ ProductionPanelBasic inicializado&quot;)

func setup_basic_layout():
	&quot;&quot;&quot;Configurar layout b√°sico con elementos nativos de Godot&quot;&quot;&quot;
	# Limpiar contenido existente
	for child in main_vbox.get_children():
		child.queue_free()

	# === T√çTULO PRINCIPAL ===
	var main_title = Label.new()
	main_title.text = &quot;üè≠ PANEL DE PRODUCCI√ìN&quot;
	main_title.add_theme_font_size_override(&quot;font_size&quot;, 36)  # 24‚Üí36 mucho m√°s grande
	main_title.horizontal_alignment = HORIZONTAL_ALIGNMENT_CENTER
	main_title.add_theme_color_override(&quot;font_color&quot;, Color.GOLD)
	main_vbox.add_child(main_title)

	# Separador
	var separator1 = HSeparator.new()
	separator1.custom_minimum_size = Vector2(0, 30)  # 20‚Üí30 m√°s espacio
	main_vbox.add_child(separator1)

	# === SECCI√ìN DE PRODUCTOS ===
	setup_products_section()

	# Separador
	var separator2 = HSeparator.new()
	separator2.custom_minimum_size = Vector2(0, 30)
	main_vbox.add_child(separator2)

	# === SECCI√ìN DE ESTACIONES DE PRODUCCI√ìN ===
	setup_stations_section()

func setup_products_section():
	&quot;&quot;&quot;Configurar secci√≥n de productos disponibles&quot;&quot;&quot;
	# T√≠tulo de secci√≥n
	var section_title = Label.new()
	section_title.text = &quot;üç∫ PRODUCTOS DISPONIBLES&quot;
	section_title.add_theme_font_size_override(&quot;font_size&quot;, 24)  # 18‚Üí24 m√°s grande
	section_title.horizontal_alignment = HORIZONTAL_ALIGNMENT_LEFT
	section_title.add_theme_color_override(&quot;font_color&quot;, Color.CYAN)
	main_vbox.add_child(section_title)

	# Contenedor horizontal para productos
	var products_hbox = HBoxContainer.new()
	products_hbox.add_theme_constant_override(&quot;separation&quot;, 10)
	products_hbox.alignment = BoxContainer.ALIGNMENT_CENTER

	# Crear paneles de productos desde GameConfig
	for product_id in GameConfig.PRODUCT_DATA.keys():
		var data = GameConfig.PRODUCT_DATA[product_id]
		var product_panel = create_product_display_panel(product_id, data)
		products_hbox.add_child(product_panel)

	main_vbox.add_child(products_hbox)

func setup_stations_section():
	&quot;&quot;&quot;Configurar secci√≥n de estaciones de producci√≥n con VBoxContainer&quot;&quot;&quot;
	# T√≠tulo de secci√≥n
	var section_title = Label.new()
	section_title.text = &quot;üè≠ ESTACIONES DE PRODUCCI√ìN&quot;
	section_title.add_theme_font_size_override(&quot;font_size&quot;, 24)  # 18‚Üí24 m√°s grande
	section_title.horizontal_alignment = HORIZONTAL_ALIGNMENT_LEFT
	section_title.add_theme_color_override(&quot;font_color&quot;, Color.ORANGE)
	main_vbox.add_child(section_title)

	# Crear VBox para estaciones (layout vertical)
	var stations_vbox = VBoxContainer.new()
	stations_vbox.add_theme_constant_override(&quot;separation&quot;, 12)
	main_vbox.add_child(stations_vbox)

	# Crear estaciones desde GameConfig.STATION_DATA
	for station_id in GameConfig.STATION_DATA.keys():
		var data = GameConfig.STATION_DATA[station_id]
		var station_button = create_station_button(station_id, data)
		stations_vbox.add_child(station_button)

func create_product_display_panel(product_id: String, data: Dictionary) -&gt; Panel:
	&quot;&quot;&quot;Crear panel individual para mostrar un producto (solo informaci√≥n)&quot;&quot;&quot;
	# Panel compacto para producto
	var panel = Panel.new()
	panel.custom_minimum_size = Vector2(200, 100)  # 180x80‚Üí200x100 m√°s grande para fuentes
	panel.size_flags_horizontal = Control.SIZE_EXPAND_FILL

	# Contenedor interno
	var vbox = VBoxContainer.new()
	vbox.set_anchors_and_offsets_preset(Control.PRESET_FULL_RECT)
	vbox.add_theme_constant_override(&quot;separation&quot;, 4)
	vbox.add_theme_constant_override(&quot;margin_left&quot;, 8)
	vbox.add_theme_constant_override(&quot;margin_right&quot;, 8)
	vbox.add_theme_constant_override(&quot;margin_top&quot;, 8)
	vbox.add_theme_constant_override(&quot;margin_bottom&quot;, 8)

	# T√≠tulo del producto
	var title_label = Label.new()
	title_label.text = &quot;%s %s&quot; % [data.emoji, data.name]
	title_label.add_theme_font_size_override(&quot;font_size&quot;, 18)  # 14‚Üí18 m√°s grande
	title_label.horizontal_alignment = HORIZONTAL_ALIGNMENT_CENTER

	# Cantidad del producto
	var amount_label = Label.new()
	amount_label.text = &quot;Cantidad: 0&quot;
	amount_label.add_theme_font_size_override(&quot;font_size&quot;, 16)  # Agregar tama√±o
	amount_label.horizontal_alignment = HORIZONTAL_ALIGNMENT_CENTER
	amount_label.vertical_alignment = VERTICAL_ALIGNMENT_CENTER
	amount_label.size_flags_vertical = Control.SIZE_EXPAND_FILL
	amount_label.name = &quot;amount_label_&quot; + product_id

	vbox.add_child(title_label)
	vbox.add_child(amount_label)
	panel.add_child(vbox)

	return panel

func create_station_button(station_id: String, data: Dictionary) -&gt; VBoxContainer:
	&quot;&quot;&quot;Crear bot√≥n individual para una estaci√≥n de producci√≥n&quot;&quot;&quot;
	var container = VBoxContainer.new()
	container.add_theme_constant_override(&quot;separation&quot;, 8)

	# Panel principal de la estaci√≥n
	var main_panel = Panel.new()
	main_panel.custom_minimum_size = Vector2(0, 100)  # 80‚Üí100 m√°s alto para fuentes grandes
	main_panel.size_flags_horizontal = Control.SIZE_EXPAND_FILL

	# Layout del panel
	var panel_vbox = VBoxContainer.new()
	panel_vbox.set_anchors_and_offsets_preset(Control.PRESET_FULL_RECT)
	panel_vbox.add_theme_constant_override(&quot;margin_left&quot;, 8)
	panel_vbox.add_theme_constant_override(&quot;margin_right&quot;, 8)
	panel_vbox.add_theme_constant_override(&quot;margin_top&quot;, 8)
	panel_vbox.add_theme_constant_override(&quot;margin_bottom&quot;, 8)
	panel_vbox.add_theme_constant_override(&quot;separation&quot;, 4)

	# T√≠tulo de la estaci√≥n
	var title_label = Label.new()
	title_label.text = &quot;%s %s&quot; % [data.emoji, data.name]
	title_label.add_theme_font_size_override(&quot;font_size&quot;, 18)  # 14‚Üí18 m√°s grande
	title_label.horizontal_alignment = HORIZONTAL_ALIGNMENT_CENTER

	# Info de la estaci√≥n con ingredientes en formato cantidad/total
	var info_label = Label.new()
	var recipe_text = _format_recipe_with_availability(station_id)
	info_label.text = &quot;Pose√≠do: 0 | %s&quot; % recipe_text
	info_label.add_theme_font_size_override(&quot;font_size&quot;, 14)  # Agregar tama√±o
	info_label.horizontal_alignment = HORIZONTAL_ALIGNMENT_CENTER
	info_label.name = &quot;info_label_&quot; + station_id

	panel_vbox.add_child(title_label)
	panel_vbox.add_child(info_label)
	main_panel.add_child(panel_vbox)

	# Contenedor de botones (horizontal)
	var buttons_hbox = HBoxContainer.new()
	buttons_hbox.add_theme_constant_override(&quot;separation&quot;, 8)

	# Bot√≥n principal de compra
	var buy_button = Button.new()
	buy_button.text = &quot;COMPRAR&quot;
	buy_button.size_flags_horizontal = Control.SIZE_EXPAND_FILL
	buy_button.custom_minimum_size = Vector2(0, 40)
	buy_button.add_theme_font_size_override(&quot;font_size&quot;, 16)  # Botones m√°s legibles
	buy_button.name = &quot;buy_button_&quot; + station_id

	# Bot√≥n multiplicador
	var multiplier_button = Button.new()
	multiplier_button.text = &quot;x1&quot;
	multiplier_button.custom_minimum_size = Vector2(60, 40)
	multiplier_button.add_theme_font_size_override(&quot;font_size&quot;, 14)  # Bot√≥n multiplicador legible
	multiplier_button.name = &quot;multiplier_button_&quot; + station_id

	# Conectar se√±ales
	buy_button.pressed.connect(_on_station_buy_pressed.bind(station_id))
	multiplier_button.pressed.connect(_on_multiplier_button_pressed.bind(station_id))

	buttons_hbox.add_child(buy_button)
	buttons_hbox.add_child(multiplier_button)

	# Guardar estado del bot√≥n
	button_states[station_id] = {
		&quot;buy_button&quot;: buy_button,
		&quot;multiplier_button&quot;: multiplier_button,
		&quot;info_label&quot;: info_label,
		&quot;multiplier&quot;: 1,
		&quot;station_id&quot;: station_id
	}

	container.add_child(main_panel)
	container.add_child(buttons_hbox)

	return container

func _format_recipe_with_availability(station_id: String) -&gt; String:
	&quot;&quot;&quot;Formatear receta mostrando ingredientes en formato cantidad_a_usar/total_disponible&quot;&quot;&quot;
	var station_data = GameConfig.STATION_DATA.get(station_id, {})
	var recipe = station_data.get(&quot;recipe&quot;, {})

	if recipe.is_empty():
		return &quot;Sin receta&quot;

	var recipe_parts = []
	for ingredient_id in recipe.keys():
		var needed_amount = recipe[ingredient_id]
		var available_amount = get_ingredient_available_amount(ingredient_id)
		var ingredient_data = GameConfig.RESOURCE_DATA.get(ingredient_id, {&quot;emoji&quot;: &quot;‚ùì&quot;, &quot;name&quot;: ingredient_id})

		# Formato: emoji cantidad_necesaria/disponible nombre
		recipe_parts.append(&quot;%s %d/%d %s&quot; % [
			ingredient_data.emoji,
			needed_amount,
			available_amount,
			ingredient_data.name
		])

	return &quot; + &quot;.join(recipe_parts)

func get_ingredient_available_amount(ingredient_id: String) -&gt; int:
	&quot;&quot;&quot;Obtener cantidad disponible de un ingrediente&quot;&quot;&quot;
	if production_manager_ref and production_manager_ref.has_method(&quot;get_game_data&quot;):
		var game_data = production_manager_ref.get_game_data()
		var resources = game_data.get(&quot;resources&quot;, {})
		return int(resources.get(ingredient_id, 0))

	# Fallback usando singleton GameManager
	if GameManager and GameManager.has_method(&quot;get_game_data&quot;):
		var game_data = GameManager.get_game_data()
		return int(game_data.resources.get(ingredient_id, 0))

	return 0

## ===== MANEJADORES DE EVENTOS =====

func _on_station_buy_pressed(station_id: String):
	&quot;&quot;&quot;Manejar click en bot√≥n de compra/producci√≥n de estaci√≥n&quot;&quot;&quot;
	if update_in_progress:
		print(&quot;‚ö†Ô∏è Update en progreso, ignorando click&quot;)
		return

	if not button_states.has(station_id):
		print(&quot;‚ùå Estado del bot√≥n no encontrado para: %s&quot; % station_id)
		return

	var state = button_states[station_id]
	var multiplier = state.multiplier

	print(&quot;üè≠ Bot√≥n de estaci√≥n presionado: %s (x%d)&quot; % [station_id, multiplier])

	# Emitir se√±ales apropiadas seg√∫n el estado de la estaci√≥n
	if is_station_unlocked_from_manager(station_id):
		production_requested.emit(station_id, multiplier)
		print(&quot;‚öôÔ∏è Se√±al production_requested emitida: %s x%d&quot; % [station_id, multiplier])
	else:
		station_purchased.emit(station_id, multiplier)
		print(&quot;üõí Se√±al station_purchased emitida: %s x%d&quot; % [station_id, multiplier])

func _on_multiplier_button_pressed(station_id: String):
	&quot;&quot;&quot;Manejar click en bot√≥n multiplicador&quot;&quot;&quot;
	if update_in_progress:
		return

	if not button_states.has(station_id):
		print(&quot;‚ùå Estado del bot√≥n no encontrado para: %s&quot; % station_id)
		return

	# Actualizar estado centralizado
	var state = button_states[station_id]
	var current_multiplier = state.multiplier
	var next_multiplier = _get_next_multiplier(current_multiplier)

	state.multiplier = next_multiplier
	state.multiplier_button.text = &quot;x%d&quot; % next_multiplier

	print(&quot;üî¢ Multiplicador cambiado para %s: x%d&quot; % [station_id, next_multiplier])

	# Emitir se√±al para notificar cambio
	multiplier_changed.emit(station_id, next_multiplier)

	# Actualizar solo esta estaci√≥n espec√≠fica INMEDIATAMENTE
	_update_single_station_state(station_id)
	print(&quot;‚úÖ Bot√≥n actualizado inmediatamente despu√©s del cambio de multiplicador&quot;)

func _get_next_multiplier(current: int) -&gt; int:
	&quot;&quot;&quot;Obtener siguiente multiplicador en secuencia x1‚Üíx5‚Üíx10‚Üíx25‚Üíx1&quot;&quot;&quot;
	match current:
		1: return 5
		5: return 10
		10: return 25
		25: return 1
		_: return 1

## ===== M√âTODOS P√öBLICOS PARA INTERFAZ EXTERNA =====

# M√©todo para compatibilidad con GameController
func set_production_manager(manager: Node):
	&quot;&quot;&quot;Establecer referencia al ProductionManager&quot;&quot;&quot;
	production_manager_ref = manager
	print(&quot;üîó ProductionPanelBasic conectado con ProductionManager&quot;)

func refresh_station_displays():
	&quot;&quot;&quot;Refrescar displays de todas las estaciones - m√©todo p√∫blico para GameController&quot;&quot;&quot;
	if production_manager_ref:
		var game_data = get_current_game_data()
		update_station_displays(game_data)

func refresh_product_displays():
	&quot;&quot;&quot;Refrescar displays de productos - m√©todo p√∫blico para GameController&quot;&quot;&quot;
	if production_manager_ref:
		var game_data = get_current_game_data()
		update_product_displays(game_data)

func update_station_displays(game_data: Dictionary):
	&quot;&quot;&quot;Actualizar todos los displays de estaciones&quot;&quot;&quot;
	if update_in_progress:
		return

	update_in_progress = true

	for station_id in button_states.keys():
		_update_single_station_state(station_id, game_data)

	update_in_progress = false

func update_product_displays(game_data: Dictionary):
	&quot;&quot;&quot;Actualizar displays de productos disponibles&quot;&quot;&quot;
	# Obtener datos del juego si no se proporcionan
	if game_data.is_empty():
		game_data = get_current_game_data()

	var products = game_data.get(&quot;products&quot;, {})

	# Actualizar cada producto
	for product_id in GameConfig.PRODUCT_DATA.keys():
		var amount_label = main_vbox.find_child(&quot;amount_label_&quot; + product_id, true, false)
		if amount_label:
			var amount = products.get(product_id, 0)
			amount_label.text = &quot;Cantidad: %d&quot; % amount

func _update_single_station_state(station_id: String, game_data: Dictionary = {}):
	&quot;&quot;&quot;Actualizar estado de una estaci√≥n espec√≠fica&quot;&quot;&quot;
	if not button_states.has(station_id):
		print(&quot;‚ùå Estado no encontrado para estaci√≥n: %s&quot; % station_id)
		return

	# Obtener datos del juego si no se proporcionan
	if game_data.is_empty():
		game_data = get_current_game_data()

	var state = button_states[station_id]
	var multiplier = state.multiplier

	# Obtener informaci√≥n actualizada
	var stations_owned = game_data.get(&quot;stations&quot;, {})
	var owned_count = stations_owned.get(station_id, 0)

	# Actualizar informaci√≥n con ingredientes disponibles
	var recipe_text = _format_recipe_with_availability(station_id)
	state.info_label.text = &quot;Pose√≠do: %d | %s&quot; % [owned_count, recipe_text]

	# Determinar estado de la estaci√≥n
	var is_unlocked = is_station_unlocked_from_manager(station_id)

	if is_unlocked:
		# Modo producci√≥n - verificar ingredientes disponibles</code></pre></div><div class="py-4"><p class="text-gray-600">project\debug\ProductionPanelBasic_NEW.gd (Line 383:3 - Line 386:6), project\scripts\ProductionPanelBasic.gd (Line 383:3 - Line 387:44)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn45" onclick="toggleCodeBlock('cloneGroup45', 'expandBtn45', 'collapseBtn45')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn45" onclick="toggleCodeBlock('cloneGroup45', 'expandBtn45', 'collapseBtn45')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup45"><code class="language-python text-sm text-gray-800">var can_produce = can_afford_production(station_id, multiplier, game_data)
		state.buy_button.disabled = not can_produce
		state.buy_button.modulate = Color.WHITE if can_produce else Color.GRAY
		state</code></pre></div><div class="py-4"><p class="text-gray-600">project\debug\ProductionPanelBasic_NEW.gd (Line 389:3 - Line 395:6), project\scripts\ProductionPanelBasic.gd (Line 400:3 - Line 407:3)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn46" onclick="toggleCodeBlock('cloneGroup46', 'expandBtn46', 'collapseBtn46')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn46" onclick="toggleCodeBlock('cloneGroup46', 'expandBtn46', 'collapseBtn46')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup46"><code class="language-python text-sm text-gray-800">var unlock_cost = get_unlock_cost(station_id)
		var money = game_data.get(&quot;money&quot;, 0)
		var can_afford = money &gt;= unlock_cost

		state.buy_button.disabled = not can_afford
		state.buy_button.modulate = Color.WHITE if can_afford else Color.GRAY
		state</code></pre></div><div class="py-4"><p class="text-gray-600">project\debug\ProductionPanelBasic_NEW.gd (Line 397:1 - Line 441:2), project\scripts\ProductionPanelBasic.gd (Line 413:1 - Line 457:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn47" onclick="toggleCodeBlock('cloneGroup47', 'expandBtn47', 'collapseBtn47')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn47" onclick="toggleCodeBlock('cloneGroup47', 'expandBtn47', 'collapseBtn47')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup47"><code class="language-python text-sm text-gray-800">func is_station_unlocked_from_manager(station_id: String) -&gt; bool:
	&quot;&quot;&quot;Verificar si una estaci√≥n est√° desbloqueada usando el manager&quot;&quot;&quot;
	if production_manager_ref and production_manager_ref.has_method(&quot;is_station_unlocked&quot;):
		return production_manager_ref.is_station_unlocked(station_id)
	return false

func can_afford_production(station_id: String, quantity: int, game_data: Dictionary) -&gt; bool:
	&quot;&quot;&quot;Verificar si se puede costear la producci√≥n con ingredientes&quot;&quot;&quot;
	var station_data = GameConfig.STATION_DATA.get(station_id, {})
	var recipe = station_data.get(&quot;recipe&quot;, {})
	var resources = game_data.get(&quot;resources&quot;, {})

	for ingredient_id in recipe.keys():
		var needed = recipe[ingredient_id] * quantity
		var available = resources.get(ingredient_id, 0)
		if available &lt; needed:
			return false

	return true

func get_unlock_cost(station_id: String) -&gt; float:
	&quot;&quot;&quot;Obtener costo de desbloqueo de una estaci√≥n&quot;&quot;&quot;
	if production_manager_ref and production_manager_ref.has_method(&quot;get_unlock_cost&quot;):
		return production_manager_ref.get_unlock_cost(station_id)

	# Fallback al costo base
	var station_data = GameConfig.STATION_DATA.get(station_id, {})
	return station_data.get(&quot;unlock_cost&quot;, 100.0)

func get_current_game_data() -&gt; Dictionary:
	&quot;&quot;&quot;Obtener datos actuales del juego&quot;&quot;&quot;
	if production_manager_ref and production_manager_ref.has_method(&quot;get_game_data&quot;):
		return production_manager_ref.get_game_data()

	# Fallback usando singleton GameManager
	if GameManager and GameManager.has_method(&quot;get_game_data&quot;):
		var game_data = GameManager.get_game_data()
		return {
			&quot;money&quot;: game_data.money,
			&quot;resources&quot;: game_data.resources.duplicate(),
			&quot;products&quot;: game_data.products.duplicate(),
			&quot;stations&quot;: game_data.stations.duplicate()
		}

	return {&quot;money&quot;: 0, &quot;resources&quot;: {}, &quot;products&quot;: {}, &quot;stations&quot;: {}}</code></pre></div><div class="py-4"><p class="text-gray-600">project\debug\ProductionPanelBasic_fixed.gd (Line 1:1 - Line 101:14), project\scripts\ProductionPanelBasic.gd (Line 1:1 - Line 101:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn48" onclick="toggleCodeBlock('cloneGroup48', 'expandBtn48', 'collapseBtn48')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn48" onclick="toggleCodeBlock('cloneGroup48', 'expandBtn48', 'collapseBtn48')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup48"><code class="language-python text-sm text-gray-800">extends Control
## ProductionPanelBasic - Panel de producci√≥n simple sin herencias complejas
## Arquitectura id√©ntica a GenerationPanelBasic para consistencia

# Se√±ales
signal station_purchased(station_id: String, quantity: int)
signal production_requested(station_id: String, quantity: int)
signal multiplier_changed(station_id: String, new_multiplier: int)

# Estado del panel
var production_manager_ref: Node = null
var button_states: Dictionary = {}  # Estados centralizados de botones
var update_in_progress: bool = false  # Prevenir updates recursivos

# Referencias
@onready var scroll_container: ScrollContainer = $ScrollContainer
@onready var main_vbox: VBoxContainer = $ScrollContainer/MainVBox

func _ready():
	print(&quot;üè≠ ProductionPanelBasic _ready() iniciado&quot;)
	setup_basic_layout()
	print(&quot;‚úÖ ProductionPanelBasic inicializado&quot;)

func setup_basic_layout():
	&quot;&quot;&quot;Configurar layout b√°sico con elementos nativos de Godot&quot;&quot;&quot;
	# Limpiar contenido existente
	for child in main_vbox.get_children():
		child.queue_free()

	# === T√çTULO PRINCIPAL ===
	var main_title = Label.new()
	main_title.text = &quot;üè≠ PANEL DE PRODUCCI√ìN&quot;
	main_title.add_theme_font_size_override(&quot;font_size&quot;, 36)  # 24‚Üí36 mucho m√°s grande
	main_title.horizontal_alignment = HORIZONTAL_ALIGNMENT_CENTER
	main_title.add_theme_color_override(&quot;font_color&quot;, Color.GOLD)
	main_vbox.add_child(main_title)

	# Separador
	var separator1 = HSeparator.new()
	separator1.custom_minimum_size = Vector2(0, 30)  # 20‚Üí30 m√°s espacio
	main_vbox.add_child(separator1)

	# === SECCI√ìN DE PRODUCTOS ===
	setup_products_section()

	# Separador
	var separator2 = HSeparator.new()
	separator2.custom_minimum_size = Vector2(0, 30)
	main_vbox.add_child(separator2)

	# === SECCI√ìN DE ESTACIONES DE PRODUCCI√ìN ===
	setup_stations_section()

func setup_products_section():
	&quot;&quot;&quot;Configurar secci√≥n de productos disponibles&quot;&quot;&quot;
	# T√≠tulo de secci√≥n
	var section_title = Label.new()
	section_title.text = &quot;üç∫ PRODUCTOS DISPONIBLES&quot;
	section_title.add_theme_font_size_override(&quot;font_size&quot;, 24)  # 18‚Üí24 m√°s grande
	section_title.horizontal_alignment = HORIZONTAL_ALIGNMENT_LEFT
	section_title.add_theme_color_override(&quot;font_color&quot;, Color.CYAN)
	main_vbox.add_child(section_title)

	# Contenedor horizontal para productos
	var products_hbox = HBoxContainer.new()
	products_hbox.add_theme_constant_override(&quot;separation&quot;, 10)
	products_hbox.alignment = BoxContainer.ALIGNMENT_CENTER

	# Crear paneles de productos desde GameConfig
	for product_id in GameConfig.PRODUCT_DATA.keys():
		var data = GameConfig.PRODUCT_DATA[product_id]
		var product_panel = create_product_display_panel(product_id, data)
		products_hbox.add_child(product_panel)

	main_vbox.add_child(products_hbox)

func setup_stations_section():
	&quot;&quot;&quot;Configurar secci√≥n de estaciones de producci√≥n con VBoxContainer&quot;&quot;&quot;
	# T√≠tulo de secci√≥n
	var section_title = Label.new()
	section_title.text = &quot;üè≠ ESTACIONES DE PRODUCCI√ìN&quot;
	section_title.add_theme_font_size_override(&quot;font_size&quot;, 24)  # 18‚Üí24 m√°s grande
	section_title.horizontal_alignment = HORIZONTAL_ALIGNMENT_LEFT
	section_title.add_theme_color_override(&quot;font_color&quot;, Color.ORANGE)
	main_vbox.add_child(section_title)

	# Crear VBox para estaciones (layout vertical)
	var stations_vbox = VBoxContainer.new()
	stations_vbox.add_theme_constant_override(&quot;separation&quot;, 12)
	main_vbox.add_child(stations_vbox)

	# Crear estaciones desde GameConfig.STATION_DATA
	for station_id in GameConfig.STATION_DATA.keys():
		var data = GameConfig.STATION_DATA[station_id]
		var station_button = create_station_button(station_id, data)
		stations_vbox.add_child(station_button)

func create_product_display_panel(product_id: String, data: Dictionary) -&gt; Panel:
	&quot;&quot;&quot;Crear panel individual para mostrar un producto (solo informaci√≥n)&quot;&quot;&quot;
	# Panel compacto para producto
	var product_panel</code></pre></div><div class="py-4"><p class="text-gray-600">project\debug\ProductionPanelBasic_fixed.gd (Line 204:2 - Line 207:27), project\scripts\ProductionPanelBasic.gd (Line 192:2 - Line 195:13)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn49" onclick="toggleCodeBlock('cloneGroup49', 'expandBtn49', 'collapseBtn49')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn49" onclick="toggleCodeBlock('cloneGroup49', 'expandBtn49', 'collapseBtn49')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup49"><code class="language-python text-sm text-gray-800">buy_button.pressed.connect(_on_station_buy_pressed.bind(station_id))
	multiplier_button.pressed.connect(_on_multiplier_button_pressed.bind(station_id))

	# Guardar estado del bot√≥n</code></pre></div><div class="py-4"><p class="text-gray-600">project\debug\ProductionPanelBasic_fixed.gd (Line 287:1 - Line 312:77), project\scripts\ProductionPanelBasic.gd (Line 357:1 - Line 382:48)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn50" onclick="toggleCodeBlock('cloneGroup50', 'expandBtn50', 'collapseBtn50')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn50" onclick="toggleCodeBlock('cloneGroup50', 'expandBtn50', 'collapseBtn50')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup50"><code class="language-python text-sm text-gray-800">func _update_single_station_state(station_id: String, game_data: Dictionary = {}):
	&quot;&quot;&quot;Actualizar estado de una estaci√≥n espec√≠fica&quot;&quot;&quot;
	if not button_states.has(station_id):
		print(&quot;‚ùå Estado no encontrado para estaci√≥n: %s&quot; % station_id)
		return

	# Obtener datos del juego si no se proporcionan
	if game_data.is_empty():
		game_data = get_current_game_data()

	var state = button_states[station_id]
	var multiplier = state.multiplier

	# Obtener informaci√≥n actualizada
	var stations_owned = game_data.get(&quot;stations&quot;, {})
	var owned_count = stations_owned.get(station_id, 0)

	# Actualizar informaci√≥n con ingredientes disponibles
	var recipe_text = _format_recipe_with_availability(station_id)
	state.info_label.text = &quot;Pose√≠do: %d | %s&quot; % [owned_count, recipe_text]

	# Determinar estado de la estaci√≥n
	var is_unlocked = is_station_unlocked_from_manager(station_id)

	if is_unlocked:
		# Modo producci√≥n - verificar ingredientes disponibles y mostrar qu√© produce</code></pre></div><div class="py-4"><p class="text-gray-600">project\debug\ProductionPanelBasic_fixed.gd (Line 348:1 - Line 360:11), project\scripts\ProductionPanelBasic.gd (Line 413:1 - Line 425:14)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn51" onclick="toggleCodeBlock('cloneGroup51', 'expandBtn51', 'collapseBtn51')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn51" onclick="toggleCodeBlock('cloneGroup51', 'expandBtn51', 'collapseBtn51')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup51"><code class="language-python text-sm text-gray-800">func is_station_unlocked_from_manager(station_id: String) -&gt; bool:
	&quot;&quot;&quot;Verificar si una estaci√≥n est√° desbloqueada usando el manager&quot;&quot;&quot;
	if production_manager_ref and production_manager_ref.has_method(&quot;is_station_unlocked&quot;):
		return production_manager_ref.is_station_unlocked(station_id)
	return false

func can_afford_production(station_id: String, quantity: int, game_data: Dictionary) -&gt; bool:
	&quot;&quot;&quot;Verificar si se puede costear la producci√≥n con ingredientes&quot;&quot;&quot;
	var station_data = GameConfig.STATION_DATA.get(station_id, {})
	var recipe = station_data.get(&quot;recipe&quot;, {})
	var resources = game_data.get(&quot;resources&quot;, {})

	for ingredient</code></pre></div><div class="py-4"><p class="text-gray-600">project\debug\ProductionPanelBasic_fixed.gd (Line 362:11 - Line 373:42), project\scripts\ProductionPanelBasic.gd (Line 427:14 - Line 438:25)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn52" onclick="toggleCodeBlock('cloneGroup52', 'expandBtn52', 'collapseBtn52')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn52" onclick="toggleCodeBlock('cloneGroup52', 'expandBtn52', 'collapseBtn52')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup52"><code class="language-python text-sm text-gray-800">, 0)
		if available &lt; needed:
			return false

	return true

func get_unlock_cost(station_id: String) -&gt; float:
	&quot;&quot;&quot;Obtener costo de desbloqueo de una estaci√≥n&quot;&quot;&quot;
	if production_manager_ref and production_manager_ref.has_method(&quot;get_unlock_cost&quot;):
		return production_manager_ref.get_unlock_cost(station_id)

	# Fallback al costo base desde GameConfig</code></pre></div><div class="py-4"><p class="text-gray-600">project\debug\ProductionPanelBasic_fixed.gd (Line 375:13 - Line 382:27), project\scripts\ProductionPanelBasic.gd (Line 440:14 - Line 447:40)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn53" onclick="toggleCodeBlock('cloneGroup53', 'expandBtn53', 'collapseBtn53')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn53" onclick="toggleCodeBlock('cloneGroup53', 'expandBtn53', 'collapseBtn53')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup53"><code class="language-python text-sm text-gray-800">, 100.0)

func get_current_game_data() -&gt; Dictionary:
	&quot;&quot;&quot;Obtener datos actuales del juego&quot;&quot;&quot;
	if production_manager_ref and production_manager_ref.has_method(&quot;get_game_data&quot;):
		return production_manager_ref.get_game_data()

	# Fallback a datos b√°sicos</code></pre></div><div class="py-4"><p class="text-gray-600">project\debug\ProductionPanelBasic_fixed.gd (Line 387:2 - Line 395:7), project\scripts\ProductionPanelBasic.gd (Line 214:2 - Line 222:14)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn54" onclick="toggleCodeBlock('cloneGroup54', 'expandBtn54', 'collapseBtn54')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn54" onclick="toggleCodeBlock('cloneGroup54', 'expandBtn54', 'collapseBtn54')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup54"><code class="language-python text-sm text-gray-800">var station_data = GameConfig.STATION_DATA.get(station_id, {})
	var recipe = station_data.get(&quot;recipe&quot;, {})

	if recipe.is_empty():
		return &quot;Sin receta&quot;

	var recipe_parts = []
	for ingredient_id in recipe.keys():
		var needed</code></pre></div><div class="py-4"><p class="text-gray-600">project\debug\ProductionPanelBasic_fixed.gd (Line 403:10 - Line 424:51), project\scripts\ProductionPanelBasic.gd (Line 232:3 - Line 253:62)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn55" onclick="toggleCodeBlock('cloneGroup55', 'expandBtn55', 'collapseBtn55')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn55" onclick="toggleCodeBlock('cloneGroup55', 'expandBtn55', 'collapseBtn55')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup55"><code class="language-python text-sm text-gray-800">])

	return &quot; + &quot;.join(recipe_parts)

func get_ingredient_available_amount(ingredient_id: String) -&gt; int:
	&quot;&quot;&quot;Obtener cantidad disponible de un ingrediente&quot;&quot;&quot;
	if production_manager_ref and production_manager_ref.has_method(&quot;get_game_data&quot;):
		var game_data = production_manager_ref.get_game_data()
		var resources = game_data.get(&quot;resources&quot;, {})
		return int(resources.get(ingredient_id, 0))

	# Fallback usando singleton GameManager
	if GameManager and GameManager.has_method(&quot;get_game_data&quot;):
		var game_data = GameManager.get_game_data()
		return int(game_data.resources.get(ingredient_id, 0))

	return 0

## ===== MANEJADORES DE EVENTOS =====

func _on_station_buy_pressed(station_id: String):
	&quot;&quot;&quot;Manejar click en bot√≥n principal de estaci√≥n&quot;&quot;&quot;</code></pre></div><div class="py-4"><p class="text-gray-600">project\debug\ProductionPanelBasic_fixed.gd (Line 426:3 - Line 454:4), project\scripts\ProductionPanelBasic.gd (Line 256:3 - Line 284:33)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn56" onclick="toggleCodeBlock('cloneGroup56', 'expandBtn56', 'collapseBtn56')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn56" onclick="toggleCodeBlock('cloneGroup56', 'expandBtn56', 'collapseBtn56')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup56"><code class="language-python text-sm text-gray-800">return

	if not button_states.has(station_id):
		print(&quot;‚ùå Estado del bot√≥n no encontrado para: %s&quot; % station_id)
		return

	var state = button_states[station_id]
	var multiplier = state.multiplier

	print(&quot;üè≠ Bot√≥n de estaci√≥n presionado: %s (x%d)&quot; % [station_id, multiplier])

	# Emitir se√±ales apropiadas seg√∫n el estado de la estaci√≥n
	if is_station_unlocked_from_manager(station_id):
		production_requested.emit(station_id, multiplier)
		print(&quot;‚öôÔ∏è Se√±al production_requested emitida: %s x%d&quot; % [station_id, multiplier])
	else:
		station_purchased.emit(station_id, multiplier)
		print(&quot;üõí Se√±al station_purchased emitida: %s x%d&quot; % [station_id, multiplier])

func _on_multiplier_button_pressed(station_id: String):
	&quot;&quot;&quot;Manejar click en bot√≥n multiplicador&quot;&quot;&quot;
	if update_in_progress:
		return

	if not button_states.has(station_id):
		print(&quot;‚ùå Estado del bot√≥n no encontrado para: %s&quot; % station_id)
		return

	var</code></pre></div><div class="py-4"><p class="text-gray-600">project\debug\ProductionPanelBasic_fixed.gd (Line 447:2 - Line 456:46), project\debug\ProductionPanelBasic_fixed.gd (Line 425:2 - Line 433:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn57" onclick="toggleCodeBlock('cloneGroup57', 'expandBtn57', 'collapseBtn57')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn57" onclick="toggleCodeBlock('cloneGroup57', 'expandBtn57', 'collapseBtn57')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup57"><code class="language-python text-sm text-gray-800">if update_in_progress:
		return

	if not button_states.has(station_id):
		print(&quot;‚ùå Estado del bot√≥n no encontrado para: %s&quot; % station_id)
		return

	var state = button_states[station_id]

	# Ciclar multiplicadores: 1 ‚Üí 5 ‚Üí 10 ‚Üí 25 ‚Üí 1</code></pre></div><div class="py-4"><p class="text-gray-600">project\debug\DebugPersistence.gd (Line 10:17 - Line 20:24), project\tests\TestGeneratorPricing.gd (Line 10:14 - Line 24:25)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn58" onclick="toggleCodeBlock('cloneGroup58', 'expandBtn58', 'collapseBtn58')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn58" onclick="toggleCodeBlock('cloneGroup58', 'expandBtn58', 'collapseBtn58')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup58"><code class="language-python text-sm text-gray-800">() -&gt; void:
	await get_tree().process_frame

	var game_controller = get_tree().get_first_node_in_group(&quot;game_controller&quot;)
	if not game_controller:
		print(&quot;‚ùå No se encontr√≥ GameController&quot;)
		return

	print(&quot;‚úÖ GameController encontrado&quot;)

	# Mostrar estado actual</code></pre></div><div class="py-4"><p class="text-gray-600">project\debug\DebugPersistence.gd (Line 39:2 - Line 49:4), project\tests\FinalSystemTest.gd (Line 67:2 - Line 77:3)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn59" onclick="toggleCodeBlock('cloneGroup59', 'expandBtn59', 'collapseBtn59')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn59" onclick="toggleCodeBlock('cloneGroup59', 'expandBtn59', 'collapseBtn59')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup59"><code class="language-python text-sm text-gray-800">var save_path = &quot;user://barsik_save.dat&quot;
	if FileAccess.file_exists(save_path):
		print(&quot;‚úÖ Archivo de guardado existe&quot;)

		var file = FileAccess.open(save_path, FileAccess.READ)
		if file:
			var content = file.get_as_text()
			file.close()

			var json = JSON.new()
			var</code></pre></div><div class="py-4"><p class="text-gray-600">project\debug\DebugPersistence.gd (Line 48:4 - Line 53:7), project\singletons\SaveSystem.gd (Line 233:2 - Line 237:3)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn60" onclick="toggleCodeBlock('cloneGroup60', 'expandBtn60', 'collapseBtn60')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn60" onclick="toggleCodeBlock('cloneGroup60', 'expandBtn60', 'collapseBtn60')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup60"><code class="language-python text-sm text-gray-800">var json = JSON.new()
			var parse_result = json.parse(content)

			if parse_result == OK:
				var data = json.get_data()
				print(</code></pre></div><div class="py-4"><p class="text-gray-600">project\debug\DebugPersistence.gd (Line 55:2 - Line 59:28), project\tests\FinalSystemTest.gd (Line 78:2 - Line 81:31)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn61" onclick="toggleCodeBlock('cloneGroup61', 'expandBtn61', 'collapseBtn61')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn61" onclick="toggleCodeBlock('cloneGroup61', 'expandBtn61', 'collapseBtn61')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup61"><code class="language-python text-sm text-gray-800">)

				var game_data = data.get(&quot;game_data&quot;, {})
				print(&quot;üí∞ Dinero guardado: %.2f&quot; % game_data.get(&quot;money&quot;, 0))
				print(&quot;üì¶ Recursos guardados: %s&quot;</code></pre></div><!-- Add more clone groups for .txt format as needed         // Add more clone groups for .txt format as needed--></div></section><!-- Add more sections for other formats and clone groups as needed--></main><footer class="bg-white shadow mt-8 py-4"><div class="container mx-auto px-4 text-center"><p class="text-sm text-gray-600">This report is generated by jscpd, an open-source copy/paste detector.</p><p class="text-sm text-gray-600">jscpd is licensed under the MIT License.</p><a class="text-blue-500 text-sm" href="https://github.com/kucherenko/jscpd" target="_blank" rel="noopener noreferrer">View jscpd on GitHub</a></div></footer><script src="js/prism.js"></script><script>function toggleCodeBlock(codeBlockId, expandBtnId, collapseBtnId) {
  const codeBlock = document.getElementById(codeBlockId);
  const expandBtn = document.getElementById(expandBtnId);
  const collapseBtn = document.getElementById(collapseBtnId);

  codeBlock.classList.toggle('hidden');
  expandBtn.classList.toggle('hidden');
  collapseBtn.classList.toggle('hidden');
}</script></body></html>